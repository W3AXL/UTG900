* Test and develop

#+BEGIN_SRC python :eval no-export :results output :noweb no :session *Python*
import UTG900
print( UTG900.version())
#+END_SRC

#+RESULTS:
: Python 3.9.1 | packaged by conda-forge | (default, Jan 10 2021, 02:55:42) 
: [GCC 9.3.0] on linux
: Type "help", "copyright", "credits" or "license" for more information.
: 0.0.5-SNAPSHOT


#+BEGIN_SRC python :eval no-export :results output :noweb no :session *Python*
sgen = UTG900.UTG962()
sgen.list_resources()
#+END_SRC

#+RESULTS:
: WARNING:absl:Successfully connected  'USB0::0x6656::0x0834::1485061822::INSTR' with 'UNI-T Technologies,UTG900,1485061822,1.08'
: Traceback (most recent call last):
:   File "<stdin>", line 1, in <module>
:   File "/tmp/babel-ZafpdS/python-xPMIfR", line 2, in <module>
:     sgen.list_resources()
:   File "/home/jj/work/UTG900/UTG900/UTG900.py", line 447, in list_resources
:     return self.rm.list_resources()
: AttributeError: 'UTG962' object has no attribute 'rm'


* Delivery                                                 

*Development environment only!!*

** Relaseit

*** Show release status

 #+BEGIN_SRC sh :eval no-export :results output
 releaseit.sh show
 #+END_SRC

 #+RESULTS:
 : /home/jj/bin/releaseit.sh - $Release:0.0.4-SNAPSHOT$
 : ------------------------------------------------------------------
 : PREV_REL=0.0.2 --> REL=0.0.3-SNAPSHOT
 : ------------------------------------------------------------------
 : ## 0.0.3-SNAPSHOT/20210328-23:02:58
 : 
 : - README.org: installation
 : ------------------------------------------------------------------


*** Create release 

 Should not have any files unchecked

 #+BEGIN_SRC sh :eval no-export :results output
 git status
 #+END_SRC

 #+RESULTS:
 : On branch master
 : Your branch is ahead of 'origin/master' by 1 commit.
 :   (use "git push" to publish your local commits)
 : 
 : nothing to commit, working tree clean


 #+BEGIN_SRC sh :eval no-export :results output
 releaseit.sh  create_release commit current VERSION files README.org -  commit tag 2>&1 || true
 #+END_SRC

 #+RESULTS:
 : [master c490f81] ## 0.0.4/20210329-09:06:37
 :  1 file changed, 1 insertion(+), 1 deletion(-)
 : [master b287267] ## 0.0.4/20210329-09:06:37
 :  2 files changed, 2 insertions(+), 2 deletions(-)


** pyinstaller

#+BEGIN_SRC bash :eval no-export :results output
pyinstaller UTG900/UTG900.py --onefile
#+END_SRC

#+RESULTS:


** Install

*** Create =setup.py= package

 #+BEGIN_SRC bash :eval no-export :results output
 cat VERSION
 #+END_SRC

 #+RESULTS:
 : 0.0.4


 Ref: https://packaging.python.org/guides/distributing-packages-using-setuptools/

 #+BEGIN_SRC bash :eval no-export :results output :exports code
 python3 setup.py  sdist  bdist_wheel
 #+END_SRC

 #+RESULTS:


*** Install distribution package

 #+BEGIN_SRC bash :eval no-export :results output
 VERSION_FILE=$(ls -1tr dist/*.tar.gz | tail -1| cut -f2)
 echo VERSION_FILE=$VERSION_FILE
 python3 -m pip install --user $VERSION_FILE  && echo installed $VERSION_FILE
 #+END_SRC

 #+RESULTS:



** Create snapshot

 #+BEGIN_SRC sh :eval no-export :results output
 releaseit.sh  create_snapshot current VERSION files README.org - commit || true
 #+END_SRC

 #+RESULTS:
 : [master 5bfc826] ## 0.0.5-SNAPSHOT/20210329-09:06:54
 :  3 files changed, 3 insertions(+), 2 deletions(-)




* Fin                                                              :noexport:


** Emacs variables

   #+RESULTS:

   # Local Variables:
   # org-confirm-babel-evaluate: nil
   # End:
   #


